{"layout":"post","title":"How to create an interactive command in Node.js","description":"Practical guide about how to create a interactive command interface with Node.js","categories":["articles"],"tags":["Node.js","Javascript"],"draft":false,"body":"<p>One of the first things we learn in a new programming language is how to  implement a command line is to read the parameters provided by user in execution, today I want to make my first blog related to <a target=\"_blank\" href=\"http://nodejs.org/\">Node.js</a> and I will show you how to make an interactive interface with Node.js.</p>\n<p>For those who are unfamiliar with the concept of interactive interfaces may refer to popular <a target=\"_blank\" href=\"http://es.wikipedia.org/wiki/Ncurses\">NCurses</a> used in <a target=\"_blank\" href=\"http://es.wikipedia.org/wiki/GNU/Linux\">GNU/Linux</a> platforms.</p>\n<p>#Install Inquirer plugin.</p>\n<p>Assuming you already installed Node.js we will use npm command to install the plugin inquirer to provide us an easy way to creating an interface.</p>\n<pre><code>$ npm install inquirer\n</code></pre><p>#Create interactive script</p>\n<p>With the Inquirer plugin installed, we need to create a script called interactivo.js in which we will create our script.</p>\n<p>The first thing to do is load the library inquirer as shown below.</p>\n<pre><code>var inquirer = require(&quot;inquirer&quot;);\n</code></pre><p>To use Inquirer we just pass an array of objects with questions and an anonymous function that will process the responses received, let me show an example the format of implementation.</p>\n<pre><code>inquirer.prompt([/* Pass your questions in here */], function( answers ) {\n    // Use user feedback for... whatever!!\n});\n</code></pre><p>Now let’s see the types of questions that we can build.</p>\n<p>##Input</p>\n<p>Input type questions are simple questions that can have a default value and the response is stored in a variable equal to the name that is provided in the configuration, see the implementation.</p>\n<pre><code>{\n  type: &#39;input&#39;,\n  name: &#39;nombre&#39;,\n  message: &#39;Nombre Completo?&#39;,\n  default: &#39;Jose Perez&#39;\n},\n</code></pre><p>##Confirm</p>\n<p>The confirm questions are of the type Yes or NO let’s see an example of its implementation.</p>\n<pre><code>{ type: &#39;confirm&#39;,\n  name: &#39;casado&#39;,\n  message: &#39;Casado?&#39;,\n},\n</code></pre><p>#List</p>\n<p>The list questions allows you to select your answer from a list of predefined options, as shown below.</p>\n<pre><code>{\n  type: &quot;list&quot;,\n  name: &quot;estudios&quot;,\n  message: &quot;Nivel academico?&quot;,\n  choices: [\n    &quot;Primaria&quot;,\n    &quot;Secundaria&quot;,\n    new inquirer.Separator(),\n    &quot;Bachillerato&quot;,\n    &quot;Licenciatura&quot;,\n    &quot;Doctorado&quot;\n   ]\n},\n</code></pre><p>This type of question allows placing a separator of options as is seen in the above list.</p>\n<p>#Checkbox</p>\n<p>The checkbox questions type allows the user to check a list of options which apply in his case, as shown in the following code listing.</p>\n<pre><code>{\n  type: &quot;checkbox&quot;,\n  message: &quot;Servicios Publicos&quot;,\n  name: &quot;servicios&quot;,\n  choices: [\n    {\n      name: &quot;Agua&quot;,\n      checked: true\n    },\n    {\n      name: &quot;Luz&quot;\n    },\n    {\n      name: &quot;Internet&quot;\n    },\n    ],\n}\n</code></pre><p>#Password</p>\n<p>The password questions type as its name suggest use a mask to hide what the user is typing on the screen, let’s see an example.</p>\n<pre><code>{\n  type: &quot;password&quot;,\n  message: &quot;Enter your git password&quot;,\n  name: &quot;password&quot;\n}\n</code></pre><p>Let’s now look full implementation.</p>\n<pre><code>var inquirer = require(&quot;inquirer&quot;);\n\nvar preguntas = [\n    {\n      type: &#39;input&#39;,\n      name: &#39;nombre&#39;,\n      message: &#39;Nombre Completo?&#39;,\n      default: &#39;Jose Perez&#39;\n    },\n    { type: &#39;confirm&#39;,\n      name: &#39;casado&#39;,\n      message: &#39;Casado?&#39;,\n    },\n    { when: function (response) {\n        return response.casado;\n      },\n      type: &#39;input&#39;,\n      name: &#39;hijos&#39;,\n      message: &#39;Número de hijos?&#39;,\n    },\n    {\n    type: &quot;list&quot;,\n    name: &quot;estudios&quot;,\n    message: &quot;Nivel academico?&quot;,\n    choices: [\n      &quot;Primaria&quot;,\n      &quot;Secundaria&quot;,\n      new inquirer.Separator(),\n      &quot;Bachillerato&quot;,\n      &quot;Licenciatura&quot;,\n      &quot;Doctorado&quot;\n     ]\n    },\n    {\n    type: &quot;checkbox&quot;,\n    message: &quot;Servicios Publicos&quot;,\n    name: &quot;servicios&quot;,\n    choices: [\n      {\n        name: &quot;Agua&quot;,\n        checked: true\n      },\n      {\n        name: &quot;Luz&quot;\n      },\n      {\n        name: &quot;Internet&quot;\n      },\n      ],\n    }\n    ];\ninquirer.prompt(preguntas, function(respuestas) {\n  console.log(respuestas);\n});\n</code></pre><p>As you can see what I did was create an array with objects with the definitions of the types of questions outlined above and this arrangement is passed to inquirer.prompt function and as the second parameter an anonymous function is pass to prints the user’s responses.</p>\n<p>Within the definition of the questions the script add a bonus which is the use of when tproperty. When is a property that allows us to validate if we show or not a question validating the previous answers as shown below.</p>\n<pre><code>when: function (response) {\n  return response.casado;\n}\n</code></pre><p>#Execute the script.</p>\n<p>To run the newly created script we just run the following command line.</p>\n<pre><code>$ node interactivo.js\n</code></pre><p>Depending on user responses the result will be different, but similar to the following image.</p>\n<p><img src=\"{{site.url}}/assets/img/nodejs_interactive.png\"/></p>\n<p>I hope you have found this blog useful.</p>\n","updatedAt":"2017-09-05T17:40:56.000Z"}
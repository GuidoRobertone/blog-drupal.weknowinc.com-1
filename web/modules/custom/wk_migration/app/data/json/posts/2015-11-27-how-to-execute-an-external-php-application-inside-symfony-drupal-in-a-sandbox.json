{"layout":"post","title":"How to execute an external PHP application inside Symfony/Drupal in a Sandbox","categories":["articles"],"tags":["Symfony","Drupal","PHP","Sandbox"],"body":"<p>I know this could be a weird situation, but, believe or not sometimes is required execute an external application, maybe because that application doesnâ€™t have and API or just because you just need to execute that and get the results.</p>\n<p>An easy thought could be just include the main file of that application, but maybe that is not possible because both applications could use similar namespaces or try to reload same libraries, for solve that is required to try to execute that application using a kind of <strong>Sandbox</strong>.</p>\n<p>To accomplish that task, we can use the Symfony <a href=\"http://symfony.com/doc/current/components/process.html\">Process</a> Component.</p>\n<p>Let me show you a small piece of code that could be included in your Symfony or Drupal 8 application.</p>\n<pre><code>use Symfony\\Component\\Process\\PhpProcess;\n\n$php_script = file_get_contents($php_file);\n\n$phpProcess = new PhpProcess($php_script, $documentroot);\n$phpProcess-&gt;run();\n$output = $phpProcess-&gt;getOutput();\n</code></pre><p>Firstly, we must read a PHP file path, defined in variable <em>$php_file</em> then using function <em>PhpProcess</em> execute that script using a specific DocumentRoot for our external application, that will avoid any issue of missing classes.</p>\n<p>Secondly, the process is executed and finally we could get the output after our external application is completed, this process is synchronous.</p>\n<p>Internally the Symfony component Process try to allocate the php-cli in your system to execute your application.</p>\n<p>I hope you found this article useful.</p>\n","updatedAt":"2017-09-05T17:40:56.000Z"}